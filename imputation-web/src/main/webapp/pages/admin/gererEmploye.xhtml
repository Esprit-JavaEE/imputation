<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	template="/template/template.xhtml">

	<ui:define name="title">Gérer les employés</ui:define>
	<ui:define name="content">
	
	
	<h:form>
		<br/>	
					<h:dataTable value="#{employeBean.employes}" var="employe" border="1" >
						<h:column>
							<f:facet name="header">
								<h:outputText value="login" />
							</f:facet>
							<h:outputText value="#{employe.email}" />
						</h:column>
	
						<h:column>
							<f:facet name="header">
								<h:outputText value="nom" />
							</f:facet>
							<h:outputText value="#{employe.nom}" />
						</h:column>
	
						<h:column>
							<f:facet name="header">
								<h:outputText value="prenom" />
							</f:facet>
							<h:outputText value="#{employe.prenom}" />
						</h:column>
						
						<h:column>
							<f:facet name="header">
								<h:outputText value="role" />
							</f:facet>
							<h:outputText value="#{employe.role}" />
						</h:column>
						
						<h:column>
							<f:facet name="header">
								<h:outputText value="Actif" />
							</f:facet>
							<h:outputText value="#{employe.actif == true ? 'Oui' : 'Non'}" />
						</h:column>						
					<h:column>
						<f:facet name="header">
							<h:outputText value="Action" />
						</f:facet>
						
						<h:commandButton action="#{employeBean.supprimer(employe.id)}" value="supprimer"/>
						
						<h:commandButton action="#{employeBean.modifier(employe)}" value="Modifier"/>			
						
					</h:column>



				 </h:dataTable>
				
				</h:form>
				<h:form>
	
				<br/>
				<br/>
				<br/>
	
<!-- 					    <f:validateRegex pattern=".+\@.+\..+" /> -->
		<h:panelGrid columns="2">
			<h:outputText value="login (email)" />
			<h:inputText id="validationEmail" 
						 value="#{employeBean.email}" 
						 required="true"
						 requiredMessage="le champs email est obligatoire">
				<f:validator validatorId="tn.esprit.validator.EmailValidator"/>
			</h:inputText>
			
			<h:outputText value="password" />
			<h:inputSecret value="#{employeBean.password}" 
							required="true" />
			
			<h:outputText value="nom" />
			<h:inputText value="#{employeBean.nom}" />
			
			<h:outputText value="Prenom" />
			<h:inputText value="#{employeBean.prenom}" />
			
			<h:outputText value="Actif / Inactif" />
			<h:selectBooleanCheckbox value="#{employeBean.actif}" />
			
			<h:outputText value="Role" />
			<h:selectOneMenu value="#{employeBean.role}">
			    <f:selectItem itemLabel="Selectionner le role" itemValue=""/>
				<f:selectItems value="#{data.roles}" />
			</h:selectOneMenu>
			
			<h:commandButton action="#{employeBean.addEmploye()}" value="Ajouter employe" />
			
			<h:commandButton action="#{employeBean.mettreAjourEmploye()}" value="Mettre a jour employe" />
		</h:panelGrid>
		<h:message for="validationEmail" style="color:green" />
		
	</h:form>
	</ui:define>

</ui:composition>
