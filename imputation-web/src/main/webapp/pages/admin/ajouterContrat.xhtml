<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	template="/template/template.xhtml">

	<ui:define name="title">Ajouter un contrat a un employé existant : </ui:define>
	<ui:define name="content">
	
			<h:dataTable value="#{contratBean.contrats}" var="contrat" border="1">
			<h:column>
				<f:facet name="header">
					<h:outputText value="Employé" />
				</f:facet>
				<h:outputText value="#{contrat.employe}" />
			</h:column>
		
			<h:column>
				<f:facet name="header">
					<h:outputText value="Type contrat" />
				</f:facet>
				<h:outputText value="#{contrat.typeContrat}" />
			</h:column>
			
			<h:column>
				<f:facet name="header">
					<h:outputText value="Salaire" />
				</f:facet>
				<h:outputText value="#{contrat.salaire}" />
			</h:column>
			
			<h:column>
				<f:facet name="header">
					<h:outputText value="Date Début" />
				</f:facet>
				<h:outputText value="#{contrat.dateDebut}" >
					<f:convertDateTime pattern="dd-MM-yyyy"/>
				</h:outputText>
			</h:column>

		</h:dataTable>
	<br/>
	<br/>
	<br/>
		<h:form id="ajoutContrat">
			<table>
				<tr>
					<td>
					<h:outputText value="Employe" /> 
					</td>
					<td>
						<h:selectOneMenu value="#{contratBean.selectedEmployeId}" >
							<f:selectItems value="#{contratBean.employes}" 
								var="employe" itemValue="#{employe.id}" 
								itemLabel="#{employe}" />
						</h:selectOneMenu>
						<!-- toString defini dans Employe -->
					</td>
				</tr>
				<tr>
					<td>
						<h:outputText value="Date debut" /> 
					</td>
					<td>
						<h:inputText id="date" value="#{contratBean.date}">
								<f:convertDateTime pattern="#{data.formatDate}"/>
						</h:inputText>
					</td>
					<td>
						<h:message for="date" style="color:red" />
					</td>
				</tr>
				<tr>
					<td>
					<h:outputText value="Salaire" />
					</td>
					<td>
					<h:inputText id="validateSalaire"
								 value="#{contratBean.salaire}" 
								 required="true"
								 requiredMessage="Le contrat doit spécifier le salaire"
								 validatorMessage="Le salaire doit etre compris	entre 350 et 3500">
						<f:validateDoubleRange minimum="350" maximum="3500" for="validateSalaire"/>
					</h:inputText>
					</td>
				</tr>
				<tr>
					<td>
					<h:outputText value="Type contrat" /> 
					</td>
					<td>
					<h:inputText value="#{contratBean.typeContrat}" />
					</td>
				</tr>
				
			</table>
			
			<h:commandButton action="#{contratBean.ajouterContrat()}" value="Ajouter contrat" />
			<br/><h:message for="validateSalaire" style="color:green" />
			
		</h:form>
		

	</ui:define>

</ui:composition>